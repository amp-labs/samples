specVersion: 1.0.0
integrations:
  # ============= JIRA =============
  - name: jira_unified
    displayName: Jira (Unified Ticketing)
    provider: atlassian
    module: jira
    read:
      objects:
        # Issue → Unified "ticket" object
        - objectName: issue
          mapToName: ticket
          destination: ticketingWebhook
          schedule: "*/10 * * * *"
          requiredFields:
            # Core ticket fields
            - fieldName: id
              mapToName: id
            - fieldName: summary
              mapToName: title
            - fieldName: description
              mapToName: description
            - fieldName: status
              mapToName: status
            - fieldName: priority
              mapToName: priority
            - fieldName: assignee
              mapToName: assignee_id
            - fieldName: reporter
              mapToName: creator_id
            - fieldName: created
              mapToName: created_at
            - fieldName: updated
              mapToName: updated_at
            - fieldName: duedate
              mapToName: due_date
            # Jira-specific fields (not in merge's common model)
            - fieldName: issuetype
            - fieldName: resolution
            - fieldName: components
            - fieldName: fixVersions
            - fieldName: labels
              mapToName: tags
            - fieldName: project
              mapToName: project_id

        # Comment → Unified "comment" object
        - objectName: comment
          mapToName: comment
          destination: ticketingWebhook
          schedule: "*/10 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: body
              mapToName: content
            - fieldName: author
              mapToName: user_id
            - fieldName: created
              mapToName: created_at
            - fieldName: issueId
              mapToName: ticket_id

        # User → Unified "user" object
        - objectName: user
          mapToName: user
          destination: ticketingWebhook
          schedule: "0 */6 * * *"
          requiredFields:
            - fieldName: accountId
              mapToName: id
            - fieldName: displayName
              mapToName: name
            - fieldName: emailAddress
              mapToName: email
            - fieldName: active
              mapToName: is_active

    write:
      objects:
        - objectName: issue
          inheritMapping: true
        - objectName: comment
          inheritMapping: true

  # ============= LINEAR =============
  - name: linear_unified
    displayName: Linear (Unified Ticketing)
    provider: linear
    read:
      objects:
        # Issues → Unified "ticket" object
        - objectName: issues
          mapToName: ticket
          destination: ticketingWebhook
          schedule: "*/10 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: title
              mapToName: title
            - fieldName: description
              mapToName: description
            - fieldName: state
              mapToName: status # Linear uses workflow states
            - fieldName: priority
              mapToName: priority
            - fieldName: assignee
              mapToName: assignee_id
            - fieldName: creator
              mapToName: creator_id
            - fieldName: createdAt
              mapToName: created_at
            - fieldName: updatedAt
              mapToName: updated_at
            - fieldName: dueDate
              mapToName: due_date
            # Linear-specific fields
            - fieldName: estimate
            - fieldName: cycleId
            - fieldName: projectId
              mapToName: project_id
            - fieldName: teamId
              mapToName: team_id
            - fieldName: labelIds
              mapToName: tags

        # Comments → Unified "comment" object
        - objectName: comments
          mapToName: comment
          destination: ticketingWebhook
          schedule: "*/10 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: body
              mapToName: content
            - fieldName: user
              mapToName: user_id
            - fieldName: createdAt
              mapToName: created_at
            - fieldName: issueId
              mapToName: ticket_id

        # Users → Unified "user" object
        - objectName: users
          mapToName: user
          destination: ticketingWebhook
          schedule: "0 */6 * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: name
              mapToName: name
            - fieldName: email
              mapToName: email
            - fieldName: active
              mapToName: is_active

    write:
      objects:
        - objectName: issues
          inheritMapping: true
        - objectName: comments
          inheritMapping: true

  # ============= ZENDESK =============
  - name: zendesk_unified
    displayName: Zendesk (Unified Ticketing)
    provider: zendeskSupport
    read:
      objects:
        # Tickets → Unified "ticket" object
        - objectName: tickets
          mapToName: ticket
          destination: ticketingWebhook
          schedule: "*/10 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: subject
              mapToName: title
            - fieldName: description
              mapToName: description
            - fieldName: status
              mapToName: status
            - fieldName: priority
              mapToName: priority
            - fieldName: assignee_id
              mapToName: assignee_id
            - fieldName: requester_id
              mapToName: creator_id
            - fieldName: created_at
              mapToName: created_at
            - fieldName: updated_at
              mapToName: updated_at
            - fieldName: due_at
              mapToName: due_date
            - fieldName: tags
              mapToName: tags
            # Zendesk-specific fields
            - fieldName: type
            - fieldName: brand_id
            - fieldName: ticket_form_id
            - fieldName: custom_fields # Full access to custom fields
            - fieldName: satisfaction_rating

        # Users → Unified "user" object
        - objectName: users
          mapToName: user
          destination: ticketingWebhook
          schedule: "0 */6 * * *"
          requiredFields:
            - fieldName: id
              mapToName: id
            - fieldName: name
              mapToName: name
            - fieldName: email
              mapToName: email
            - fieldName: active
              mapToName: is_active
            - fieldName: role

    write:
      objects:
        - objectName: tickets
          inheritMapping: true
