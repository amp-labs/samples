specVersion: 1.0.0
integrations:
  - name: servicenow-integration
    provider: serviceNow
    read:
      objects:
        - objectName: now/table/incident
          destination: serviceNowWebhook
          schedule: "*/30 * * * *" # Every 30 minutes
          requiredFields:
            - fieldName: sys_id
            - fieldName: parent
            - fieldName: upon_reject
            - fieldName: child_incidents
          optionalFields:
            - fieldName: impact

        - objectName: now/table/cmdb_ci_email_server
          destination: serviceNowWebhook
          schedule: "*/30 * * * *" # Every 30 minutes
          requiredFields:
            - fieldName: id
            - fieldName: operational_status
            - fieldName: sys_domain
            - fieldName: sys_class_name
          optionalFields:
            - fieldName: city

        - objectName: now/contact
          destination: serviceNowWebhook
          schedule: "*/30 * * * *" # Every 30 minutes
          requiredFields:
            - fieldName: country
            - fieldName: last_login_device
            - fieldName: phone
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: now/contact
        - objectName: now/table/incident
        - objectName: now/consumer
