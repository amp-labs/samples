specVersion: 1.0.0
integrations:
  - name: readAndWriteLever
    displayName: Lever read and write
    provider: lever
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: requisition_fields
          destination: leverWebhooks
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://hire.lever.co/developer/documentation#list-all-requisition-fields
          requiredFields:
            - fieldName: id
            - fieldName: text
          optionalFieldsAuto: all

        - objectName: form_templates
          destination: leverWebhooks
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://hire.lever.co/developer/documentation#list-all-profile-form-templates
          requiredFields:
            - fieldName: id
            - fieldName: text
          optionalFieldsAuto: all

        - objectName: opportunities
          destination: leverWebhooks
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://hire.lever.co/developer/documentation#list-all-opportunities
          requiredFields:
            - fieldName: id
            - fieldName: name
          backfill:
            defaultPeriod:
              days: 30 # Backfill the last 30 days of data
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: requisition_fields # https://hire.lever.co/developer/documentation#create-a-requisition
        - objectName: requisitions # https://hire.lever.co/developer/documentation#create-a-requisition-field
        - objectName: form_templates # https://hire.lever.co/developer/documentation#create-a-profile-form-template

    proxy:
      enabled: true
