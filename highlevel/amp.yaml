specVersion: 1.0.0
integrations:
  - name: readAndWriteHighLevelSandard
    displayName: HighLevelStandard read and write
    provider: highLevelStandard
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: businesses
          destination: highLevelStandardWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://highlevel.stoplight.io/docs/integrations/a8db8afcbe0a3-get-businesses-by-location
          requiredFields:
            - fieldName: id
            - fieldName: name
          optionalFieldsAuto: all

        - objectName: calendars/groups
          destination: highLevelStandardWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://highlevel.stoplight.io/docs/integrations/89e47b6c05e67-get-groups
          requiredFields:
            - fieldName: id
            - fieldName: name
          optionalFieldsAuto: all

        - objectName: products/collections
          destination: highLevelStandardWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://highlevel.stoplight.io/docs/integrations/b81c5b2b915be-fetch-product-collections
          requiredFields:
            - fieldName: _id
            - fieldName: name
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: businesses
        - objectName: products/collections
        - objectName: calendars/groups

    proxy:
      enabled: true
