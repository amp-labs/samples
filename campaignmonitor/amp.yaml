specVersion: 1.0.0
integrations:
  - name: readAndWriteCampaignMonitor
    displayName: Campaign Monitor read and write
    provider: campaignMonitor
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: clients
          destination:  
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://www.campaignmonitor.com/api/v3-3/account/#getting-your-clients
          requiredFields:
            - fieldName: ClientID
          optionalFieldsAuto: all

        - objectName: admins
          destination: campaignMonitorWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://www.campaignmonitor.com/api/v3-3/account/#getting-administrators
          requiredFields:
            - fieldName: EmailAddress
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: clients
        - objectName: admins

    proxy:
      enabled: true
