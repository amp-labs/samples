specVersion: 1.0.0
integrations:
  - name: readAndWriteGoogleGmail
    displayName: Google gmail read and write
    provider: google
    module: gmail
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:
        - objectName: messages
          destination: googleGmailWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developers.google.com/workspace/gmail/api/reference/rest/v1/users.messages/list
          requiredFields:
            - fieldName: id
            - fieldName: "$['payload']['body']"
            - fieldName: "$['payload']['mimeType']"
          optionalFieldsAuto: all

        - objectName: labels
          destination: googleGmailWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developers.google.com/workspace/gmail/api/reference/rest/v1/users.labels/get
          requiredFields:
            - fieldName: id
            - fieldName: name
            - fieldName: type
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: drafts

    proxy:
      enabled: true
