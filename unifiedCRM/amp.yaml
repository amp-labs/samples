specVersion: 1.0.0
integrations:
  # ============= SALESFORCE =============
  - name: salesforce_unified
    displayName: Salesforce (Unified CRM)
    provider: salesforce
    read:
      objects:
        # Account → Unified "company" object
        - objectName: account
          mapToName: company
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            # Core fields that exist across all CRMs
            - fieldName: id
              mapToName: remote_id
            - fieldName: createddate
              mapToName: remote_created_at
            - fieldName: lastmodifieddate
              mapToName: remote_updated_at
            - fieldName: ownerid
              mapToName: owner
            - fieldName: name
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: industry
              mapToName: industry
            - fieldName: website
              mapToName: website
            - fieldName: numberofemployees
              mapToName: employee_count
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Account address
              prompt: Please select the field that contains address for this account
            - mapToName: phone_numbers
              mapToDisplayName: Account phone number
              prompt: Please select the field that contains phone number for this account

        # Contact → Unified "person" object
        - objectName: contact
          mapToName: person
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: remote_id
            - fieldName: createddate
              mapToName: remote_created_at
            - fieldName: firstname
              mapToName: first_name
            - fieldName: lastname
              mapToName: last_name
            - fieldName: accountid
              mapToName: account
            - fieldName: ownerid
              mapToName: owner
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Contact address
              prompt: Please select the field that contains address for this contact
            - fieldName: email
              mapToName: email_addresses

        # Opportunity → Unified "deal" object
        - objectName: opportunity
          mapToName: deal
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: remote_id
            - fieldName: createddate
              mapToName: remote_created_at
            - fieldName: name
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: amount
              mapToName: value
            - fieldName: ownerid
              mapToName: owner
            - fieldName: accountid
              mapToName: company
            - fieldName: stagename
              mapToName: stage
            - fieldName: stagename
              mapToName: status
            - fieldName: closedate
              mapToName: expected_close

    write:
      objects:
        - objectName: account
          inheritMapping: true
        - objectName: contact
          inheritMapping: true
        - objectName: opportunity
          inheritMapping: true

  # ============= HUBSPOT =============
  - name: hubspot_unified
    displayName: HubSpot (Unified CRM)
    provider: hubspot
    module: crm
    read:
      objects:
        # Company → Unified "company" object
        - objectName: companies
          mapToName: company
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            # Core fields that exist across all CRMs
            - fieldName: hs_object_id
              mapToName: remote_id
            - fieldName: createdate
              mapToName: remote_created_at
            - fieldName: hs_lastmodifieddate
              mapToName: remote_updated_at
            - fieldName: hubspot_owner_id
              mapToName: owner
            - fieldName: name
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: industry
              mapToName: industry
            - fieldName: website
              mapToName: website
            - fieldName: numberofemployees
              mapToName: employee_count
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Company address
              prompt: Please select the field that contains address for this company
            - mapToName: phone_numbers
              mapToDisplayName: Company phone number
              prompt: Please select the field that contains phone number for this company

        # Contact → Unified "person" object
        - objectName: contacts
          mapToName: person
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: hs_object_id
              mapToName: remote_id
            - fieldName: createdate
              mapToName: remote_created_at
            - fieldName: firstname
              mapToName: first_name
            - fieldName: lastname
              mapToName: last_name
            - fieldName: company
              mapToName: account
            - fieldName: hubspot_owner_id
              mapToName: owner
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Contact address
              prompt: Please select the field that contains address for this contact
            - mapToName: email_addresses
              mapToDisplayName: Contact email address
              prompt: Please select the field that contains email address for this contact

        # Deal → Unified "deal" object
        - objectName: deals
          mapToName: deal
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: hs_object_id
              mapToName: remote_id
            - fieldName: createdate
              mapToName: remote_created_at
            - fieldName: dealname
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: amount
              mapToName: value
            - fieldName: hubspot_owner_id
              mapToName: owner
            - fieldName: dealstage
              mapToName: stage
            - fieldName: closedate
              mapToName: expected_close

    write:
      objects:
        - objectName: companies
          inheritMapping: true
        - objectName: contacts
          inheritMapping: true
        - objectName: deals
          inheritMapping: true

  # ============= ZOHO CRM =============
  - name: zoho_unified
    displayName: Zoho CRM (Unified CRM)
    provider: zoho
    module: crm
    read:
      objects:
        # Accounts → Unified "company" object
        - objectName: accounts
          mapToName: company
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: remote_id
            - fieldName: created_time
              mapToName: remote_created_at
            - fieldName: modified_time
              mapToName: remote_updated_at
            - fieldName: owner
              mapToName: owner
            - fieldName: account_name
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: industry
              mapToName: industry
            - fieldName: website
              mapToName: website
            - fieldName: employees
              mapToName: employee_count
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Account address
              prompt: Please select the field that contains address for accounts
            - mapToName: phone_numbers
              mapToDisplayName: Account phone number
              prompt: Please select the field that contains phone number for accounts

        # Contacts → Unified "person" object
        - objectName: contacts
          mapToName: person
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: remote_id
            - fieldName: created_time
              mapToName: remote_created_at
            - fieldName: first_name
              mapToName: first_name
            - fieldName: last_name
              mapToName: last_name
            - fieldName: account_name
              mapToName: account
            - fieldName: owner
              mapToName: owner
            # Prompt the user to select the fields to map
            - mapToName: addresses
              mapToDisplayName: Contact address
              prompt: Please select the field that contains address for contacts
            - mapToName: email_addresses
              mapToDisplayName: Contact email address
              prompt: Please select the field that contains email address for contacts

        # Deals → Unified "deal" object
        - objectName: deals
          mapToName: deal
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: id
              mapToName: remote_id
            - fieldName: created_time
              mapToName: remote_created_at
            - fieldName: deal_name
              mapToName: name
            - fieldName: description
              mapToName: description
            - fieldName: amount
              mapToName: value
            - fieldName: owner
              mapToName: owner
            - fieldName: account_name
              mapToName: company
            - fieldName: stage
              mapToName: stage
            - fieldName: closing_date
              mapToName: expected_close

    write:
      objects:
        - objectName: accounts
          inheritMapping: true
        - objectName: contacts
          inheritMapping: true
        - objectName: deals
          inheritMapping: true

  # ============= DYNAMICS 365 =============
  - name: dynamics_unified
    displayName: Dynamics 365 (Unified CRM)
    provider: dynamicsCRM
    read:
      objects:
        # accounts → Unified "company" object
        - objectName: accounts
          mapToName: company
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: accountid
              mapToName: remote_id
            - fieldName: createdtime
              mapToName: remote_created_at
            - fieldName: modifiedtime
              mapToName: remote_updated_at
            - fieldName: name
              mapToName: name
            - fieldName: websiteurl
              mapToName: website
            - fieldName: industrycode
              mapToName: industry
            - fieldName: numberofemployees
              mapToName: employee_count
            - fieldName: ownerid
              mapToName: owner_id

        # contacts → Unified "person" object
        - objectName: contacts
          mapToName: person
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: contactid
              mapToName: remote_id
            - fieldName: createdtime
              mapToName: remote_created_at
            - fieldName: firstname
              mapToName: first_name
            - fieldName: lastname
              mapToName: last_name
            - fieldName: emailaddress1
              mapToName: email
            - fieldName: parentcustomerid
              mapToName: company_id
            - fieldName: ownerid
              mapToName: owner_id

        # opportunities → Unified "deal" object
        - objectName: opportunities
          mapToName: deal
          destination: crmWebhook
          schedule: "*/15 * * * *"
          requiredFields:
            - fieldName: opportunityid
              mapToName: remote_id
            - fieldName: createdtime
              mapToName: remote_created_at
            - fieldName: name
              mapToName: name
            - fieldName: estimatedvalue
              mapToName: value
            - fieldName: salesstagecode
              mapToName: stage
            - fieldName: estimatedclosedate
              mapToName: expected_close
            - fieldName: customerid
              mapToName: company_id
            - fieldName: ownerid
              mapToName: owner_id

    write:
      objects:
        - objectName: accounts
          inheritMapping: true
        - objectName: contacts
          inheritMapping: true
        - objectName: opportunities
          inheritMapping: true
