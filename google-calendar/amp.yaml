specVersion: 1.0.0
integrations:
  - name: readAndWriteGoogleCalendar
    displayName: Google calendar read and write
    provider: google
    module: calendar
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: calendarList
          destination: googleCalendarWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developers.google.com/calendar/api/v3/reference/calendarList#resource-representations
          requiredFields:
            - fieldName: id
            - fieldName: summary
            - fieldName: backgroundColor
          optionalFieldsAuto: all

        - objectName: events
          destination: googleCalendarWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developers.google.com/workspace/calendar/api/v3/reference/events
          requiredFields:
            - fieldName: id
            - fieldName: summary
            - fieldName: location
          optionalFieldsAuto: all
          backfill:
            defaultPeriod:
              days: 28 # Due to Google API limits, max backfill period is 28 days.

        - objectName: settings
          destination: googleCalendarWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developers.google.com/calendar/api/v3/reference/settings#resource-representations
          requiredFields:
            - fieldName: id
            - fieldName: value
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: calendarList
        - objectName: events

    proxy:
      enabled: true
