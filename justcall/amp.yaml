specVersion: 1.0.0
integrations:
  - name: readAndWriteJustCall
    displayName: JustCall read and write
    provider: justCall
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: contacts
          destination: justcallWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developer.justcall.io/reference/get_contacts_v21
          requiredFields:
            - fieldName: id
            - fieldName: first_name
            - fieldName: last_name
            - fieldName: contact_number
          optionalFieldsAuto: all

        - objectName: calls
          destination: justcallWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developer.justcall.io/reference/call_list_v21
          requiredFields:
            - fieldName: id
            - fieldName: agent_name
            - fieldName: contact_name
            - fieldName: call_date
          optionalFieldsAuto: all

        - objectName: texts
          destination: justcallWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developer.justcall.io/reference/sms_list_v21
          requiredFields:
            - fieldName: id
            - fieldName: contact_name
            - fieldName: direction
          optionalFieldsAuto: all

        - objectName: users
          destination: justcallWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developer.justcall.io/reference/users_list_v21
          requiredFields:
            - fieldName: id
            - fieldName: name
            - fieldName: email
          optionalFieldsAuto: all

        - objectName: tags
          destination: justcallWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://developer.justcall.io/reference/tags_list_v21
          requiredFields:
            - fieldName: id
            - fieldName: name
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: contacts
        - objectName: tags

    proxy:
      enabled: true
