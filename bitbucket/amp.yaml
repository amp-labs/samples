specVersion: 1.0.0
integrations:
  - name: integration-bitbucket
    displayName: Bitbucket read
    provider: bitbucket
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:
        - objectName: repositories
          destination: bitbucketWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          requiredFields:
            - fieldName: full_name
            - fieldName: type
            - fieldName: name
            - fieldName: description
          optionalFieldsAuto: all

        - objectName: workspaces
          destination: bitbucketWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          requiredFields:
            - fieldName: type
            - fieldName: uuid
            - fieldName: name
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: projects
        - objectName: snippets
        - objectName: hooks
