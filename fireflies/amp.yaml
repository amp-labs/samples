specVersion: 1.0.0
integrations:
  - name: readAndWriteFireflies
    displayName: Fireflies read and write
    provider: fireflies
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: bites
          destination: firefliesWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://docs.fireflies.ai/graphql-api/query/bites
          requiredFields:
            - fieldName: id
            - fieldName: name
            - fieldName: status
          optionalFieldsAuto: all

        - objectName: transcripts
          destination: firefliesWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://docs.fireflies.ai/graphql-api/query/transcripts
          requiredFields:
            - fieldName: id
            - fieldName: title
            - fieldName: meeting_link
          optionalFieldsAuto: all

        - objectName: users
          destination: firefliesWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names come from https://docs.fireflies.ai/graphql-api/query/users
          requiredFields:
            - fieldName: email
            - fieldName: name
            - fieldName: email
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: liveMeetings # Supported operation: create.
        - objectName: bites # Supported operation: create.
        - objectName: meetingTitle # Supported operation: update.

    proxy:
      enabled: true
