specVersion: 1.0.0
integrations:
  - name: readAndWriteAvoma
    displayName: Avoma read and write
    provider: avoma
    # Define what you want to read
    # Learn more: https://docs.withampersand.com/docs/read-actions
    read:
      objects:

        - objectName: custom_categories
          destination: avomaWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://dev694.avoma.com/#tag/Custom-Category/paths/~1v1~1custom_categories~1/get
          requiredFields:
            - fieldName: uuid
            - fieldName: name
          backfill:
            defaultPeriod:
              days: 30 # Backfill the last 30 days of data
          optionalFieldsAuto: all

        - objectName: smart_categories
          destination: avomaWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://dev694.avoma.com/#tag/Smart-Category/paths/~1v1~1smart_categories~1/get
          requiredFields:
            - fieldName: uuid
            - fieldName: name
          backfill:
            defaultPeriod:
              days: 30 # Backfill the last 30 days of data
          optionalFieldsAuto: all

        - objectName: template
          destination: avomaWebhook
          schedule: "*/10 * * * *" # Every 10 minutes
          # Field names can be found at https://dev694.avoma.com/#tag/Templates/paths/~1v1~1template~1/get
          requiredFields:
            - fieldName: uuid
            - fieldName: name
          optionalFieldsAuto: all

    write:
      objects:
        - objectName: smart_categories # https://dev694.avoma.com/#tag/Smart-Category/paths/~1v1~1smart_categories~1/post
        - objectName: template # https://dev694.avoma.com/#tag/Templates/paths/~1v1~1template~1/post
        - objectName: calls # https://dev694.avoma.com/#tag/Calls/operation/createExtCall

    proxy:
      enabled: true
